!function(){function a(a,b){this.touchstart="ontouchstart"in window?"touchstart":"click",this.touchend="ontouchend"in window?"touchend":"click",this.current=0,this.next=1,this.max=void 0,this.options=b,this.gllry=document.getElementById(a),this.gllry.classList.add("gllry"),this.breadcrumbs=void 0,this.items=this.gllry.querySelectorAll("li"),this.images=this.gllry.querySelectorAll("img"),this.gllry.querySelector("ul").classList.add("size"),this.max=this.items.length,b.fullscreen&&this.gllry.classList.add("fullscreen"),b.breadcrumbs&&this.setBreadcrumbs(),b.headings&&this.setHeading(),this.setCurrent(),b.autoPlay&&this.autoPlay(),b.action&&this.setAction(),this.options.nav_buttons&&this.setNavButtons();var c=null;this.gllry.addEventListener(this.touchstart,function(a){c=a.touches?a.touches[0].clientX:a.clientX})}var b="Close",c="fade";ANIMATION_BACK="back",ANIMATION_FWD="fwd",a.prototype.go=function(a){var b=-1;a=parseInt(a),a>this.current&&(b=1),this.current=a,this.current===this.max&&(this.current=0),this.current<0&&(this.current=this.max-1),this.next=this.current+1,this.next===this.max&&(this.next=0),this.setCurrent()},a.prototype.goNext=function(){this.current++,this.current===this.max&&(this.current=0),this.next=this.current,this.next===this.max&&(this.next=0),this.gllry.querySelector(".next")&&this.gllry.querySelector(".next").classList.remove("next"),this.items[this.next]&&this.items[this.next].classList.add("next"),this.options.animate?this.animate(!1):this.setCurrent()},a.prototype.goPrev=function(){this.current--,this.current<0&&(this.current=this.max-1),this.next=this.current,this.next<0&&(this.next=this.max-1),this.gllry.querySelector(".next")&&this.gllry.querySelector(".next").classList.remove("next"),this.items[this.next]&&this.items[this.next].classList.add("next"),this.options.animate?this.animate(!0):this.setCurrent()},a.prototype.setBreadcrumbs=function(){this.breadcrumbs=document.createElement("ul"),this.breadcrumbs.classList.add("breadcrumbs"),this.breadcrumbs.classList.add(this.options.breadcrumbs.position);for(var a=0;a<this.images.length;a++){var b=document.createElement("li");b.setAttribute("data-index",a),this.breadcrumbs.appendChild(b)}this.gllry.appendChild(this.breadcrumbs),this.breadcrumbs.addEventListener("click",function(a){a.target.getAttribute("data-index")})},a.prototype.setNavButtons=function(){var a=this;this.nav_buttons=document.createElement("ul"),this.nav_buttons.classList.add("nav_buttons");var b=document.createElement("li");b.classList.add("back"),this.nav_buttons.appendChild(b),b.addEventListener(this.touchend,function(){a.goPrev()});var c=document.createElement("li");c.classList.add("fwd"),c.addEventListener(this.touchend,function(){a.goNext()}),this.nav_buttons.appendChild(c),this.gllry.appendChild(this.nav_buttons)},a.prototype.setHeading=function(){this.heading=document.createElement("span"),this.heading.classList.add("heading"),this.gllry.appendChild(this.heading)},a.prototype.animate=function(a){var b=this,d=this.gllry.querySelector(".current");d&&(d.addEventListener("webkittransitionend",function e(){b.setCurrent(),d.classList.remove(c),d.classList.remove(ANIMATION_BACK),d.classList.remove(ANIMATION_FWD),d.removeEventListener("webkittransitionend",e)}),d.addEventListener("transitionend",function f(){b.setCurrent(),d.classList.remove(c),d.classList.remove(ANIMATION_BACK),d.classList.remove(ANIMATION_FWD),d.removeEventListener("transitionend",f)}),d.classList.add(c),a?d.classList.add(ANIMATION_FWD):d.classList.add(ANIMATION_BACK))},a.prototype.setCurrent=function(){var a=this;this.gllry.querySelector(".current")&&this.gllry.querySelector(".current").classList.remove("current"),this.gllry.querySelector(".next")&&this.gllry.querySelector(".next").classList.remove("next"),this.breadcrumbs.querySelector(".current")&&this.breadcrumbs.querySelector(".current").classList.remove("current"),this.actionButton&&this.actionButton.classList.remove("show"),this.items[this.current]&&this.items[this.current].classList.add("current"),this.items[this.next]&&this.items[this.next].classList.add("next"),this.breadcrumbs.children[this.current].classList.add("current"),this.heading&&(this.heading.innerHTML=this.items[this.current].querySelector("img").getAttribute("alt")),this.options.action&&setTimeout(function(){a.actionButton.classList.add("show")},this.options.action.timeout||0),this.options.autoPlay&&this.autoPlay()},a.prototype.setAction=function(){this.actionButton=document.createElement("button"),this.actionButton.innerHTML=this.options.action.text||b,this.actionButton.addEventListener("click",this.options.action.callback),this.actionButton.classList.add("action"),this.options.action.position&&this.actionButton.classList.add(this.options.action.position),this.gllry.appendChild(this.actionButton)},a.prototype.autoPlay=function(){var a=this;clearTimeout(this.interval),this.interval=null,this.interval=setTimeout(function(){a.goNext()},this.options.autoPlay)},a.prototype.fullscreen=function(){this.gllry.classList.toggle("fullscreen")},a.prototype.hide=function(){this.gllry.classList.add("hidden")},a.prototype.show=function(){this.gllry.classList.remove("hidden")},window.Gllry=a}();
//# sourceMappingURL=gllry.map